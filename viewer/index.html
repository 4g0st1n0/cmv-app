<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Configurable Viewer</title>
        <link rel="stylesheet" type="text/css" href="//js.arcgis.com/3.10/js/esri/css/esri.css">
        <link rel="stylesheet" type="text/css" href="css/main.css">
    </head>
    <body class="dbootstrap">
        <div class="appHeader">
            <div class="headerLogo">
                <img alt="logo" src="images/rocket-logo.png" height="54" />
            </div>
            <div class="headerTitle">
                Configurable Map Viewer
                <div class="subHeaderTitle">
                    make it your own
                </div>
            </div>
            <div class="search">
                <div id='geocodeDijit'>
                </div>
            </div>
            <div class="headerLinks">
                <div id="helpDijit">
                </div>
            </div>
        </div>
        <div id="sidebarCollapseButton" class="sidebarCollapseButton close" style="display:none;">
        </div>
        <script type="text/javascript">
            var dojoConfig = {
                async: true,
                packages: [{
                    name: 'viewer',
                    location: location.pathname.replace(/[^\/]+$/, '') + 'js/viewer'
                },{
                    name: "config",
                    location: location.pathname.replace(/[^\/]+$/, '') + "js/config"
                },{
                    name: 'gis',
                    location: location.pathname.replace(/[^\/]+$/, '') + 'js/gis'
                },{
                    name: 'dbootstrap',
                    location: location.pathname.replace(/[^\/]+$/, '') + 'js/dbootstrap'
                }]
            };
        </script>
        <script type="text/javascript" src="//js.arcgis.com/3.10"></script>
        <script type="text/javascript">
            // get the config file from the url if present
            var dec = decodeURIComponent, qp = window.location.search.substring(1).split("&"), q = {}, name, val;
            for(var i = 0, l = qp.length, item; i < l; ++i){
                item = qp[i];
                if(item.length){
                    var s = item.indexOf("=");
                    if(s < 0){
                        name = dec(item);
                        val = "";
                    }else{
                        name = dec(item.slice(0, s));
                        val  = dec(item.slice(s + 1));
                    }
                    if(typeof q[name] == "string"){ // inline'd type check
                        q[name] = [q[name]];
                    }
                    if(Object.prototype.toString.call(q[name]) === '[object Array]'){
                        q[name].push(val);
                    }else{
                        q[name] = val;
                    }
                }
            }
            var file = q.config || 'viewer';
            var app; //dev only
            require(['dbootstrap','viewer/Controller', 'config/' + file], function(dbootstrap, Controller, config){
                Controller.startup(config);
                app = Controller; //dev only
            });
        </script>
    </body>
</html>
